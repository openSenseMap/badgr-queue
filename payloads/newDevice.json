{
  "template": "newBox",
  "lang": "en_US",
  "recipient": { "address": "max@mustermann.de", "name": "Max Mustermann" },
  "payload": {
    "box": {
      "createdAt": "2023-03-17T12:27:05.939Z",
      "exposure": "outdoor",
      "model": "homeV2Wifi",
      "grouptag": [],
      "name": "CountYourBirds Test",
      "updatedAt": "2023-03-17T12:27:05.939Z",
      "currentLocation": {
        "timestamp": "2023-03-17T12:27:05.929Z",
        "coordinates": [7, 52],
        "type": "Point"
      },
      "sensors": [
        {
          "title": "PM1",
          "unit": "µg/m³",
          "sensorType": "SPS30",
          "icon": "osem-cloud",
          "_id": "64145c9965b19020ac8ea433"
        },
        {
          "title": "PM2.5",
          "unit": "µg/m³",
          "sensorType": "SPS30",
          "icon": "osem-cloud",
          "_id": "64145c9965b19020ac8ea432"
        },
        {
          "title": "PM4",
          "unit": "µg/m³",
          "sensorType": "SPS30",
          "icon": "osem-cloud",
          "_id": "64145c9965b19020ac8ea431"
        },
        {
          "title": "PM10",
          "unit": "µg/m³",
          "sensorType": "SPS30",
          "icon": "osem-cloud",
          "_id": "64145c9965b19020ac8ea430"
        }
      ],
      "_id": "64145c9965b19020ac8ea42f",
      "loc": [
        {
          "geometry": {
            "timestamp": "2023-03-17T12:27:05.929Z",
            "coordinates": [7, 52],
            "type": "Point"
          },
          "type": "Feature"
        }
      ]
    },
    "user": {
      "name": "Max Mustermann",
      "email": "max@mustermann.de",
      "role": "user",
      "language": "en_US",
      "boxes": ["64145c9965b19020ac8ea42f"],
      "emailIsConfirmed": false
    },
    "origin": ""
  },
  "attachment": {
    "filename": "senseBox.ino",
    "contents": "LyoNDQogIHNlbnNlQm94OmhvbWUgLSBDaXRpemVuIFNlbnNpbmdwbGF0Zm9ybQ0NCiAgVmVyc2lvbjogd2lmaXYyXzEuNi4wDQ0KICBEYXRlOiAyMDIyLTAzLTA0DQ0KICBIb21lcGFnZTogaHR0cHM6Ly93d3cuc2Vuc2Vib3guZGUgaHR0cHM6Ly93d3cub3BlbnNlbnNlbWFwLm9yZw0NCiAgQXV0aG9yOiBSZWVkdSBHbWJIICYgQ28uIEtHDQ0KICBOb3RlOiBTa2V0Y2ggZm9yIHNlbnNlQm94OmhvbWUgV2lGaSBNQ1UgRWRpdGlvbg0NCiAgTW9kZWw6IGhvbWVWMldpZmkNDQogIEVtYWlsOiBzdXBwb3J0QHNlbnNlYm94LmRlDQ0KICBDb2RlIGlzIGluIHRoZSBwdWJsaWMgZG9tYWluLg0NCiAgaHR0cHM6Ly9naXRodWIuY29tL3NlbnNlYm94L25vZGUtc2tldGNoLXRlbXBsYXRlcg0NCiovDQ0KDQ0KI2luY2x1ZGUgPFdpRmkxMDEuaD4NDQojaW5jbHVkZSA8V2lyZS5oPg0NCiNpbmNsdWRlIDxTUEkuaD4NDQojaW5jbHVkZSA8c2Vuc2VCb3hJTy5oPg0NCg0NCiNpbmNsdWRlIDxBZGFmcnVpdF9HRlguaD4NDQojaW5jbHVkZSA8QWRhZnJ1aXRfU1NEMTMwNi5oPg0NCiNpbmNsdWRlIDxBZGFmcnVpdF9TZW5zb3IuaD4NDQojaW5jbHVkZSA8QWRhZnJ1aXRfSERDMTAwMC5oPg0NCiNpbmNsdWRlIDxBZGFmcnVpdF9CTVAyODAuaD4NDQojaW5jbHVkZSA8QWRhZnJ1aXRfQk1FNjgwLmg+DQ0KI2luY2x1ZGUgPFZFTUw2MDcwLmg+DQ0KI2luY2x1ZGUgPFNwYXJrRnVuX1NDRDMwX0FyZHVpbm9fTGlicmFyeS5oPg0NCiNpbmNsdWRlIDxMVFIzMjkuaD4NDQojaW5jbHVkZSA8QXJkdWlub0JlYXJTU0wuaD4NDQojaW5jbHVkZSA8QWRhZnJ1aXRfRFBTMzEwLmg+IC8vIGh0dHA6Ly9saWJyYXJ5bWFuYWdlci9BbGwjQWRhZnJ1aXRfRFBTMzEwDQ0KI2luY2x1ZGUgPHNwczMwLmg+IC8vIGh0dHA6Ly9saWJyYXJ5bWFuYWdlci9BbGwjDQ0KDQ0KDQ0KLy8gVW5jb21tZW50IHRoZSBuZXh0IGxpbmUgdG8gZ2V0IGRlYnVnZ2luZyBtZXNzYWdlcyBwcmludGVkIG9uIHRoZSBTZXJpYWwgcG9ydA0NCi8vIERvIG5vdCBsZWF2ZSB0aGlzIGVuYWJsZWQgZm9yIGxvbmcgdGltZSB1c2UNDQovLyAjZGVmaW5lIEVOQUJMRV9ERUJVRw0NCg0NCiNpZmRlZiBFTkFCTEVfREVCVUcNDQojZGVmaW5lIERFQlVHKHN0cikgU2VyaWFsLnByaW50bG4oc3RyKQ0NCiNkZWZpbmUgREVCVUdfQVJHUyhzdHIsc3RyMSkgU2VyaWFsLnByaW50bG4oc3RyLHN0cjEpDQ0KI2RlZmluZSBERUJVRzIoc3RyKSBTZXJpYWwucHJpbnQoc3RyKQ0NCiNkZWZpbmUgREVCVUdfV1JJVEUoYykgU2VyaWFsLndyaXRlKGMpDQ0KI2Vsc2UNDQojZGVmaW5lIERFQlVHKHN0cikNDQojZGVmaW5lIERFQlVHX0FSR1Moc3RyLHN0cjEpDQ0KI2RlZmluZSBERUJVRzIoc3RyKQ0NCiNkZWZpbmUgREVCVUdfV1JJVEUoYykNDQojZW5kaWYNDQoNDQovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovDQ0KLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTWV0YWRhdGEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLw0NCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8NDQovKiBTRU5TRUJPWCBJRCAgOiA2NDE0NWM5OTY1YjE5MDIwYWM4ZWE0MmYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovDQ0KLyogU0VOU0VCT1ggTkFNRTogQ291bnRZb3VyQmlyZHMgVGVzdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovDQ0KLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLw0NCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUVuZCBvZiBNZXRhZGF0YS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8NDQovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovDQ0KDQ0KLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLw0NCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUNvbmZpZ3VyYXRpb24tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8NDQovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovDQ0KDQ0KLy8gV2lmaSBDcmVkZW50aWFscw0NCmNvbnN0IGNoYXIgKnNzaWQgPSAiIjsgLy8geW91ciBuZXR3b3JrIFNTSUQgKG5hbWUpDQ0KY29uc3QgY2hhciAqcGFzcyA9ICIiOyAvLyB5b3VyIG5ldHdvcmsgcGFzc3dvcmQNDQoNDQovLyBJbnRlcnZhbCBvZiBtZWFzdXJpbmcgYW5kIHN1Ym1pdHRpbmcgdmFsdWVzIGluIHNlY29uZHMNDQpjb25zdCB1bnNpZ25lZCBpbnQgcG9zdGluZ0ludGVydmFsID0gNjBlMzsNDQoNDQovLyBhZGRyZXNzIG9mIHRoZSBzZXJ2ZXIgdG8gc2VuZCB0bw0NCmNvbnN0IGNoYXIgc2VydmVyW10gUFJPR01FTSA9ICIiOw0NCg0NCi8vIHNlbnNlQm94IElEDQ0KY29uc3QgY2hhciBTRU5TRUJPWF9JRFtdIFBST0dNRU0gPSAiNjQxNDVjOTk2NWIxOTAyMGFjOGVhNDJmIjsNDQoNDQovLyBOdW1iZXIgb2Ygc2Vuc29ycw0NCi8vIENoYW5nZSB0aGlzIG51bWJlciBpZiB5b3UgYWRkIG9yIHJlbW92ZSBzZW5zb3JzDQ0KLy8gZG8gbm90IGZvcmdldCB0byByZW1vdmUgb3IgYWRkIHRoZSBzZW5zb3JzIG9uIG9wZW5zZW5zZW1hcC5vcmcNDQpzdGF0aWMgY29uc3QgdWludDhfdCBOVU1fU0VOU09SUyA9IDQ7DQ0KDQ0KLy8gQ29ubmVjdGVkIHNlbnNvcnMNDQovLyBQTTEgLSBTUFMzMAojZGVmaW5lIFNQUzMwX0NPTk5FQ1RFRA0KLy8gUE0yLjUgLSBTUFMzMAojZGVmaW5lIFNQUzMwX0NPTk5FQ1RFRA0KLy8gUE00IC0gU1BTMzAKI2RlZmluZSBTUFMzMF9DT05ORUNURUQNCi8vIFBNMTAgLSBTUFMzMAojZGVmaW5lIFNQUzMwX0NPTk5FQ1RFRA0NCg0NCi8vIERpc3BsYXkgZW5hYmxlZA0NCi8vIFVuY29tbWVudCB0aGUgbmV4dCBsaW5lIHRvIGdldCB2YWx1ZXMgb2YgbWVhc3VyZW1lbnRzIHByaW50ZWQgb24gZGlzcGxheQ0NCi8vI2RlZmluZSBESVNQTEFZMTI4eDY0X0NPTk5FQ1RFRA0NCg0NCi8vIFNlbnNvciBTRU5TT1JfSURzDQ0KLy8gUE0xIC0gU1BTMzAKY29uc3QgY2hhciBTUFMzMF9QTTFTRU5TT1JfSURbXSBQUk9HTUVNID0gIjY0MTQ1Yzk5NjViMTkwMjBhYzhlYTQzMyI7DQovLyBQTTIuNSAtIFNQUzMwCmNvbnN0IGNoYXIgU1BTMzBfUE0yNVNFTlNPUl9JRFtdIFBST0dNRU0gPSAiNjQxNDVjOTk2NWIxOTAyMGFjOGVhNDMyIjsNCi8vIFBNNCAtIFNQUzMwCmNvbnN0IGNoYXIgU1BTMzBfUE00U0VOU09SX0lEW10gUFJPR01FTSA9ICI2NDE0NWM5OTY1YjE5MDIwYWM4ZWE0MzEiOw0KLy8gUE0xMCAtIFNQUzMwCmNvbnN0IGNoYXIgU1BTMzBfUE0xMFNFTlNPUl9JRFtdIFBST0dNRU0gPSAiNjQxNDVjOTk2NWIxOTAyMGFjOGVhNDMwIjsNDQoNDQpXaUZpQ2xpZW50IHdpZmlDbGllbnQ7DQ0KQmVhclNTTENsaWVudCBjbGllbnQod2lmaUNsaWVudCk7DQ0KDQ0KdW5zaWduZWQgbG9uZyBnZXRUaW1lKCkgew0NCiAgcmV0dXJuIFdpRmkuZ2V0VGltZSgpOw0NCn0NDQoNDQovL0xvYWQgc2Vuc29ycyAvIGluc3RhbmNlcw0NCiNpZmRlZiBIREMxMDgwX0NPTk5FQ1RFRA0NCiAgQWRhZnJ1aXRfSERDMTAwMCBIREMgPSBBZGFmcnVpdF9IREMxMDAwKCk7DQ0KI2VuZGlmDQ0KI2lmZGVmIEJNUDI4MF9DT05ORUNURUQNDQogIEFkYWZydWl0X0JNUDI4MCBCTVA7DQ0KI2VuZGlmDQ0KI2lmZGVmIFRTTDQ1MzE1X0NPTk5FQ1RFRA0NCiAgYm9vbCBsaWdodHNlbnNvcnR5cGUgPSAwOyAvLzAgZm9yIHRzbCAtIDEgZm9yIGx0cg0NCiAgLy9zZXR0aW5ncyBmb3IgTFRSIHNlbnNvcg0NCiAgTFRSMzI5IExUUjsNDQogIHVuc2lnbmVkIGNoYXIgZ2FpbiA9IDE7DQ0KICB1bnNpZ25lZCBjaGFyIGludGVncmF0aW9uVGltZSA9IDA7DQ0KICB1bnNpZ25lZCBjaGFyIG1lYXN1cmVtZW50UmF0ZSA9IDM7DQ0KI2VuZGlmDQ0KI2lmZGVmIFZFTUw2MDcwX0NPTk5FQ1RFRA0NCiAgVkVNTDYwNzAgVkVNTDsNDQojZW5kaWYNDQojaWZkZWYgU01UNTBfQ09OTkVDVEVEDQ0KICAjZGVmaW5lIFNPSUxURU1QUElOIDANDQogICNkZWZpbmUgU09JTE1PSVNQSU4gMQ0NCiNlbmRpZg0NCiNpZmRlZiBTT1VORExFVkVMTUVURVJfQ09OTkVDVEVEDQ0KICAjZGVmaW5lIFNPVU5ETUVURVJQSU4gMA0NCiNlbmRpZg0NCiNpZmRlZiBCTUU2ODBfQ09OTkVDVEVEDQ0KICBBZGFmcnVpdF9CTUU2ODAgQk1FOw0NCiNlbmRpZg0NCiNpZmRlZiBXSU5EU1BFRURfQ09OTkVDVEVEDQ0KICAjZGVmaW5lIFdJTkRTUEVFRFBJTiAwDQ0KI2VuZGlmDQ0KI2lmZGVmIFNDRDMwX0NPTk5FQ1RFRA0NCiAgU0NEMzAgU0NEOw0NCiNlbmRpZg0NCiNpZmRlZiBESVNQTEFZMTI4eDY0X0NPTk5FQ1RFRA0NCiNkZWZpbmUgU0NSRUVOX1dJRFRIIDEyOA0NCiNkZWZpbmUgU0NSRUVOX0hFSUdIVCA2NA0NCiNkZWZpbmUgT0xFRF9SRVNFVCA0DQ0KQWRhZnJ1aXRfU1NEMTMwNiBkaXNwbGF5KFNDUkVFTl9XSURUSCwgU0NSRUVOX0hFSUdIVCwgJldpcmUsIE9MRURfUkVTRVQpOw0NCiNlbmRpZg0NCiNpZmRlZiBEUFMzMTBfQ09OTkVDVEVEDQ0KICBBZGFmcnVpdF9EUFMzMTAgZHBzOw0NCiNlbmRpZg0NCiNpZmRlZiBTUFMzMF9DT05ORUNURUQNDQogIHVpbnQzMl90IGF1dG9fY2xlYW5fZGF5cyA9IDQ7DQ0KICBzdHJ1Y3Qgc3BzMzBfbWVhc3VyZW1lbnQgbTsNDQogIGludDE2X3QgcmV0Ow0NCiAgdWludDMyX3QgYXV0b19jbGVhbjsNDQojZW5kaWYNDQoNDQoNDQp0eXBlZGVmIHN0cnVjdCBtZWFzdXJlbWVudCB7DQ0KICBjb25zdCBjaGFyICpzZW5zb3JJZDsNDQogIGZsb2F0IHZhbHVlOw0NCn0gbWVhc3VyZW1lbnQ7DQ0KDQ0KbWVhc3VyZW1lbnQgbWVhc3VyZW1lbnRzW05VTV9TRU5TT1JTXTsNDQp1aW50OF90IG51bV9tZWFzdXJlbWVudHMgPSAwOw0NCg0NCi8vIGJ1ZmZlciBmb3Igc3ByaW50Zg0NCmNoYXIgYnVmZmVyWzc1MF07DQ0KDQ0KLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLw0NCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tRW5kIG9mIENvbmZpZ3VyYXRpb24tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8NDQovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovDQ0KDQ0Kdm9pZCBhZGRNZWFzdXJlbWVudChjb25zdCBjaGFyICpzZW5zb3JJZCwgZmxvYXQgdmFsdWUpIHsNDQogIG1lYXN1cmVtZW50c1tudW1fbWVhc3VyZW1lbnRzXS5zZW5zb3JJZCA9IHNlbnNvcklkOw0NCiAgbWVhc3VyZW1lbnRzW251bV9tZWFzdXJlbWVudHNdLnZhbHVlID0gdmFsdWU7DQ0KICBudW1fbWVhc3VyZW1lbnRzKys7DQ0KfQ0NCg0NCnZvaWQgd3JpdGVNZWFzdXJlbWVudHNUb0NsaWVudCgpIHsNDQogIC8vIGl0ZXJhdGUgdGhyb3VnIHRoZSBtZWFzdXJlbWVudHMgYXJyYXkNDQogIGZvciAodWludDhfdCBpID0gMDsgaSA8IG51bV9tZWFzdXJlbWVudHM7IGkrKykgew0NCiAgICBzcHJpbnRmX1AoYnVmZmVyLCBQU1RSKCIlcywlOS4yZlxuIiksIG1lYXN1cmVtZW50c1tpXS5zZW5zb3JJZCwNDQogICAgICAgICAgICAgIG1lYXN1cmVtZW50c1tpXS52YWx1ZSk7DQ0KDQ0KICAgIC8vIHRyYW5zbWl0IGJ1ZmZlciB0byBjbGllbnQNDQogICAgY2xpZW50LnByaW50KGJ1ZmZlcik7DQ0KICAgIERFQlVHMihidWZmZXIpOw0NCiAgfQ0NCg0NCiAgLy8gcmVzZXQgbnVtX21lYXN1cmVtZW50cw0NCiAgbnVtX21lYXN1cmVtZW50cyA9IDA7DQ0KfQ0NCg0NCnZvaWQgc3VibWl0VmFsdWVzKCkgew0NCiAgaWYgKFdpRmkuc3RhdHVzKCkgIT0gV0xfQ09OTkVDVEVEKSB7DQ0KICAgIFdpRmkuZGlzY29ubmVjdCgpOw0NCiAgICBkZWxheSgxMDAwKTsgLy8gd2FpdCAxcw0NCiAgICBXaUZpLmJlZ2luKHNzaWQsIHBhc3MpOw0NCiAgICBkZWxheSg1MDAwKTsgLy8gd2FpdCA1cw0NCiAgfQ0NCiAgLy8gY2xvc2UgYW55IGNvbm5lY3Rpb24gYmVmb3JlIHNlbmQgYSBuZXcgcmVxdWVzdC4NDQogIC8vIFRoaXMgd2lsbCBmcmVlIHRoZSBzb2NrZXQgb24gdGhlIFdpRmkgc2hpZWxkDQ0KICBpZiAoY2xpZW50LmNvbm5lY3RlZCgpKSB7DQ0KICAgIGNsaWVudC5zdG9wKCk7DQ0KICAgIGRlbGF5KDEwMDApOw0NCiAgfQ0NCiAgYm9vbCBjb25uZWN0ZWQgPSBmYWxzZTsNDQogIGNoYXIgX3NlcnZlcltzdHJsZW5fUChzZXJ2ZXIpXTsNDQogIHN0cmNweV9QKF9zZXJ2ZXIsIHNlcnZlcik7DQ0KICBmb3IgKHVpbnQ4X3QgdGltZW91dCA9IDI7IHRpbWVvdXQgIT0gMDsgdGltZW91dC0tKSB7DQ0KICAgIFNlcmlhbC5wcmludGxuKEYoImNvbm5lY3RpbmcuLi4iKSk7DQ0KICAgIGNvbm5lY3RlZCA9IGNsaWVudC5jb25uZWN0KF9zZXJ2ZXIsIDQ0Myk7DQ0KICAgIGlmIChjb25uZWN0ZWQgPT0gdHJ1ZSkgew0NCiAgICAgIERFQlVHKEYoIkNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCwgdHJhbnNmZXJyaW5nLi4uIikpOw0NCiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgSFRUUCBQT1NUIHJlcXVlc3Q6DQ0KICAgICAgc3ByaW50Zl9QKGJ1ZmZlciwNDQogICAgICAgICAgICAgICAgUFNUUigiUE9TVCAvYm94ZXMvJXMvZGF0YSBIVFRQLzEuMVxuQXV0aG9yaXphdGlvbjogOWNhNWI3MDg4YzhlNTc2ZWQ5MDRkMGU2ZDRiZjJiMWZhMzkxYzU1YzllZjVkNGU5ODViMTcyYmY2MWE2ZGQ1NVxuSG9zdDogJXNcbkNvbnRlbnQtVHlwZTogIg0NCiAgICAgICAgICAgICAgICAgICAgICJ0ZXh0L2NzdlxuQ29ubmVjdGlvbjogY2xvc2VcbkNvbnRlbnQtTGVuZ3RoOiAlaVxuXG4iKSwNDQogICAgICAgICAgICAgICAgU0VOU0VCT1hfSUQsIHNlcnZlciwgbnVtX21lYXN1cmVtZW50cyAqIDM1KTsNDQogICAgICBERUJVRyhidWZmZXIpOw0NCg0NCiAgICAgIC8vIHNlbmQgdGhlIEhUVFAgUE9TVCByZXF1ZXN0Og0NCiAgICAgIGNsaWVudC5wcmludChidWZmZXIpOw0NCg0NCiAgICAgIC8vIHNlbmQgbWVhc3VyZW1lbnRzDQ0KICAgICAgd3JpdGVNZWFzdXJlbWVudHNUb0NsaWVudCgpOw0NCg0NCiAgICAgIC8vIHNlbmQgZW1wdHkgbGluZSB0byBlbmQgdGhlIHJlcXVlc3QNDQogICAgICBjbGllbnQucHJpbnRsbigpOw0NCg0NCiAgICAgIHVpbnQxNl90IHRpbWVvdXQgPSAwOw0NCiAgICAgIC8vIGFsbG93IHRoZSByZXNwb25zZSB0byBiZSBjb21wdXRlZA0NCg0NCiAgICAgIHdoaWxlICh0aW1lb3V0IDw9IDUwMDApIHsNDQogICAgICAgIGRlbGF5KDEwKTsNDQogICAgICAgIHRpbWVvdXQgPSB0aW1lb3V0ICsgMTA7DQ0KICAgICAgICBpZiAoY2xpZW50LmF2YWlsYWJsZSgpKSB7DQ0KICAgICAgICAgIGJyZWFrOw0NCiAgICAgICAgfQ0NCiAgICAgIH0NDQoNDQogICAgICB3aGlsZSAoY2xpZW50LmF2YWlsYWJsZSgpKSB7DQ0KICAgICAgICBjaGFyIGMgPSBjbGllbnQucmVhZCgpOw0NCiAgICAgICAgREVCVUdfV1JJVEUoYyk7DQ0KICAgICAgICAvLyBpZiB0aGUgc2VydmVyJ3MgZGlzY29ubmVjdGVkLCBzdG9wIHRoZSBjbGllbnQ6DQ0KICAgICAgICBpZiAoIWNsaWVudC5jb25uZWN0ZWQoKSkgew0NCiAgICAgICAgICBERUJVRygpOw0NCiAgICAgICAgICBERUJVRyhGKCJkaXNjb25uZWN0aW5nIGZyb20gc2VydmVyLiIpKTsNDQogICAgICAgICAgY2xpZW50LnN0b3AoKTsNDQogICAgICAgICAgYnJlYWs7DQ0KICAgICAgICB9DQ0KICAgICAgfQ0NCg0NCiAgICAgIERFQlVHKEYoImRvbmUhIikpOw0NCg0NCiAgICAgIC8vIHJlc2V0IG51bWJlciBvZiBtZWFzdXJlbWVudHMNDQogICAgICBudW1fbWVhc3VyZW1lbnRzID0gMDsNDQogICAgICBicmVhazsNDQogICAgfQ0NCiAgICBkZWxheSgxMDAwKTsNDQogIH0NDQoNDQogIGlmIChjb25uZWN0ZWQgPT0gZmFsc2UpIHsNDQogICAgLy8gUmVzZXQgZHVyY2hmw7xocmVuDQ0KICAgIERFQlVHKEYoImNvbm5lY3Rpb24gZmFpbGVkLiBSZXN0YXJ0aW5nIFN5c3RlbS4iKSk7DQ0KICAgIGRlbGF5KDUwMDApOw0NCiAgICBub0ludGVycnVwdHMoKTsNDQogICAgTlZJQ19TeXN0ZW1SZXNldCgpOw0NCiAgICB3aGlsZSAoMSkNDQogICAgICA7DQ0KICB9DQ0KfQ0NCg0NCnZvaWQgY2hlY2tJMkNTZW5zb3JzKCkgew0NCiAgYnl0ZSBlcnJvcjsNDQogIGludCBuRGV2aWNlcyA9IDA7DQ0KICBieXRlIHNlbnNvckFkZHJbXSA9IHs0MSwgNTYsIDU3LCA2NCwgOTcsIDExOH07DQ0KICBERUJVRyhGKCJcblNjYW5uaW5nLi4uIikpOw0NCiAgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXplb2Yoc2Vuc29yQWRkcik7IGkrKykgew0NCiAgICBXaXJlLmJlZ2luVHJhbnNtaXNzaW9uKHNlbnNvckFkZHJbaV0pOw0NCiAgICBlcnJvciA9IFdpcmUuZW5kVHJhbnNtaXNzaW9uKCk7DQ0KICAgIGlmIChlcnJvciA9PSAwKSB7DQ0KICAgICAgbkRldmljZXMrKzsNDQogICAgICBzd2l0Y2ggKHNlbnNvckFkZHJbaV0pDQ0KICAgICAgew0NCiAgICAgICAgY2FzZSAweDI5Og0NCiAgICAgICAgICBERUJVRyhGKCJUU0w0NTMxNSBmb3VuZC4iKSk7DQ0KICAgICAgICAgIGJyZWFrOw0NCiAgICAgICAgY2FzZSAweDM4OiAvLyAmMHgzOQ0NCiAgICAgICAgICBERUJVRyhGKCJWRU1MNjA3MCBmb3VuZC4iKSk7DQ0KICAgICAgICAgIGJyZWFrOw0NCiAgICAgICAgY2FzZSAweDQwOg0NCiAgICAgICAgICBERUJVRyhGKCJIREMxMDgwIGZvdW5kLiIpKTsNDQogICAgICAgICAgYnJlYWs7DQ0KICAgICAgICBjYXNlIDB4NzY6DQ0KICAgICAgICAjaWZkZWYgQk1QMjgwX0NPTk5FQ1RFRA0NCiAgICAgICAgICBERUJVRygiQk1QMjgwIGZvdW5kLiIpOw0NCiAgICAgICAgI2VsaWYgZGVmaW5lZChCTUU2ODBfQ09OTkVDVEVEKQ0NCiAgICAgICAgICBERUJVRygiQk1FNjgwIGZvdW5kLiIpOw0NCiAgICAgICAgI2Vsc2UNDQogICAgICAgICAgREVCVUcoIkRQUzMxMCBmb3VuZC4iKTsNDQogICAgICAgICNlbmRpZg0NCiAgICAgICAgICBicmVhazsNDQogICAgICAgIGNhc2UgMHg2MToNDQogICAgICAgICAgREVCVUcoIlNDRDMwIGZvdW5kLiIpOw0NCiAgICAgICAgICBicmVhazsNDQogICAgICB9DQ0KICAgIH0NDQogICAgZWxzZSBpZiAoZXJyb3IgPT0gNCkNDQogICAgew0NCiAgICAgIERFQlVHMihGKCJVbmtub3duIGVycm9yIGF0IGFkZHJlc3MgMHgiKSk7DQ0KICAgICAgaWYgKHNlbnNvckFkZHJbaV0gPCAxNikNDQogICAgICAgIERFQlVHMihGKCIwIikpOw0NCiAgICAgIERFQlVHX0FSR1Moc2Vuc29yQWRkcltpXSwgSEVYKTsNDQogICAgfQ0NCiAgfQ0NCiAgaWYgKG5EZXZpY2VzID09IDApIHsNDQogICAgREVCVUcoRigiTm8gSTJDIGRldmljZXMgZm91bmQuXG5DaGVjayBjYWJsZSBjb25uZWN0aW9ucyBhbmQgcHJlc3MgUmVzZXQuIikpOw0NCiAgICB3aGlsZSh0cnVlKTsNDQogIH0gZWxzZSB7DQ0KICAgIERFQlVHMihuRGV2aWNlcyk7DQ0KICAgIERFQlVHKEYoIiBzZW5zb3JzIGZvdW5kLlxuIikpOw0NCiAgfQ0NCn0NDQoNDQp2b2lkIHNldHVwKCkgew0NCiAgLy8gSW5pdGlhbGl6ZSBzZXJpYWwgYW5kIHdhaXQgZm9yIHBvcnQgdG8gb3BlbjoNDQogICNpZmRlZiBFTkFCTEVfREVCVUcNDQogICAgU2VyaWFsLmJlZ2luKDk2MDApOw0NCiAgI2VuZGlmDQ0KICBkZWxheSg1MDAwKTsNDQoNDQogIERFQlVHMihGKCJ4YmVlMSBzcGkgZW5hYmxlLi4uIikpOw0NCiAgc2Vuc2VCb3hJTy5TUElzZWxlY3RYQjEoKTsgLy8gc2VsZWN0IFhCRUUxIHNwaQ0NCiAgREVCVUcoRigiZG9uZSIpKTsNDQogIHNlbnNlQm94SU8ucG93ZXJYQjEoZmFsc2UpOw0NCiAgZGVsYXkoMjAwKTsNDQogIERFQlVHMihGKCJ4YmVlMSBwb3dlciBvbi4uLiIpKTsNDQogIHNlbnNlQm94SU8ucG93ZXJYQjEodHJ1ZSk7IC8vIHBvd2VyIE9OIFhCRUUxDQ0KICBERUJVRyhGKCJkb25lIikpOw0NCiAgc2Vuc2VCb3hJTy5wb3dlckkyQyhmYWxzZSk7DQ0KICBkZWxheSgyMDApOw0NCiAgc2Vuc2VCb3hJTy5wb3dlckkyQyh0cnVlKTsNDQogIGRlbGF5KDIwMCk7DQ0KICBzZW5zZUJveElPLnBvd2VyVUFSVCh0cnVlKTsNDQoNDQojaWZkZWYgRElTUExBWTEyOHg2NF9DT05ORUNURUQNDQogIERFQlVHMihGKCJlbmFibGUgZGlzcGxheS4uLiIpKTsNDQogIGRlbGF5KDIwMDApOw0NCiAgZGlzcGxheS5iZWdpbihTU0QxMzA2X1NXSVRDSENBUFZDQywgMHgzRCk7DQ0KICBkaXNwbGF5LmRpc3BsYXkoKTsNDQogIGRlbGF5KDEwMCk7DQ0KICBkaXNwbGF5LmNsZWFyRGlzcGxheSgpOw0NCiAgREVCVUcoRigiZG9uZS4iKSk7DQ0KICBkaXNwbGF5LnNldEN1cnNvcigwLCAwKTsNDQogIGRpc3BsYXkuc2V0VGV4dFNpemUoMik7DQ0KICBkaXNwbGF5LnNldFRleHRDb2xvcihXSElURSwgQkxBQ0spOw0NCiAgZGlzcGxheS5wcmludGxuKCJzZW5zZUJveDoiKTsNDQogIGRpc3BsYXkucHJpbnRsbigiaG9tZVxuIik7DQ0KICBkaXNwbGF5LnNldFRleHRTaXplKDEpOw0NCiAgZGlzcGxheS5wcmludGxuKCJWZXJzaW9uIFdpZmkgIik7DQ0KICBkaXNwbGF5LnNldFRleHRTaXplKDIpOw0NCiAgZGlzcGxheS5kaXNwbGF5KCk7DQ0KICBkZWxheSgyMDAwKTsNDQogIGRpc3BsYXkuY2xlYXJEaXNwbGF5KCk7DQ0KICBkaXNwbGF5LnNldEN1cnNvcigwLCAwKTsNDQogIGRpc3BsYXkuc2V0VGV4dFNpemUoMSk7DQ0KICBkaXNwbGF5LnByaW50bG4oIkNvbm5lY3RpbmcgdG86Iik7DQ0KICBkaXNwbGF5LnByaW50bG4oKTsNDQogIGRpc3BsYXkucHJpbnRsbihzc2lkKTsNDQogIGRpc3BsYXkuc2V0VGV4dFNpemUoMSk7DQ0KICBkaXNwbGF5LmRpc3BsYXkoKTsNDQojZW5kaWYNDQoNDQogIC8vIENoZWNrIFdpRmkgQmVlIHN0YXR1cw0NCiAgaWYgKFdpRmkuc3RhdHVzKCkgPT0gV0xfTk9fU0hJRUxEKSB7DQ0KICAgIERFQlVHKEYoIldpRmkgc2hpZWxkIG5vdCBwcmVzZW50IikpOw0NCiAgICAvLyBkb24ndCBjb250aW51ZToNDQogICAgd2hpbGUgKHRydWUpOw0NCiAgfQ0NCiAgdWludDhfdCBzdGF0dXMgPSBXTF9JRExFX1NUQVRVUzsNDQogIC8vIGF0dGVtcHQgdG8gY29ubmVjdCB0byBXaWZpIG5ldHdvcms6DQ0KICB3aGlsZSAoc3RhdHVzICE9IFdMX0NPTk5FQ1RFRCkgew0NCiNpZmRlZiBESVNQTEFZMTI4eDY0X0NPTk5FQ1RFRA0NCiAgICBkaXNwbGF5LnByaW50KCIuIik7DQ0KICAgIGRpc3BsYXkuZGlzcGxheSgpOw0NCiNlbmRpZg0NCiAgICBERUJVRzIoRigiQXR0ZW1wdGluZyB0byBjb25uZWN0IHRvIFNTSUQ6ICIpKTsNDQogICAgREVCVUcoc3NpZCk7DQ0KICAgIC8vIENvbm5lY3QgdG8gV1BBL1dQQTIgbmV0d29yay4gQ2hhbmdlIHRoaXMgbGluZSBpZiB1c2luZyBvcGVuIG9yIFdFUA0NCiAgICAvLyBuZXR3b3JrDQ0KICAgIHN0YXR1cyA9IFdpRmkuYmVnaW4oc3NpZCwgcGFzcyk7DQ0KICAgIC8vIHdhaXQgMTAgc2Vjb25kcyBmb3IgY29ubmVjdGlvbjoNDQogICAgREVCVUcyKEYoIldhaXRpbmcgMTAgc2Vjb25kcyBmb3IgY29ubmVjdGlvbi4uLiIpKTsNDQogICAgZGVsYXkoMTAwMDApOw0NCiAgICBERUJVRyhGKCJkb25lLiIpKTsNDQogIH0NDQoNDQogIC8vIGNoZWNrIHRoZSBzZXJ2ZXIgdGltZSBmb3IgdGhlIHZhbGlkYXRpb24gb2YgdGhlIGNlcnRpZmljYXRlDQ0KICBBcmR1aW5vQmVhclNTTC5vbkdldFRpbWUoZ2V0VGltZSk7DQ0KDQ0KICAjaWZkZWYgRU5BQkxFX0RFQlVHDQ0KICAgIC8vIGluaXQgSTJDL3dpcmUgbGlicmFyeQ0NCiAgICBXaXJlLmJlZ2luKCk7DQ0KICAgIGNoZWNrSTJDU2Vuc29ycygpOw0NCiAgI2VuZGlmDQ0KDQ0KICAvLyBTZW5zb3IgaW5pdGlhbGl6YXRpb24NDQogIERFQlVHKEYoIkluaXRpYWxpemluZyBzZW5zb3JzLi4uIikpOw0NCiAgI2lmZGVmIEhEQzEwODBfQ09OTkVDVEVEDQ0KICAgIEhEQy5iZWdpbigpOw0NCiAgI2VuZGlmDQ0KICAjaWZkZWYgQk1QMjgwX0NPTk5FQ1RFRA0NCiAgICBCTVAuYmVnaW4oMHg3Nik7DQ0KICAjZW5kaWYNDQogICNpZmRlZiBWRU1MNjA3MF9DT05ORUNURUQNDQogICAgVkVNTC5iZWdpbigpOw0NCiAgICBkZWxheSg1MDApOw0NCiAgI2VuZGlmDQ0KICAjaWZkZWYgVFNMNDUzMTVfQ09OTkVDVEVEDQ0KICAgIExpZ2h0c2Vuc29yX2JlZ2luKCk7DQ0KICAjZW5kaWYNDQogICNpZmRlZiBCTUU2ODBfQ09OTkVDVEVEDQ0KICAgIEJNRS5iZWdpbigweDc2KTsNDQogICAgQk1FLnNldFRlbXBlcmF0dXJlT3ZlcnNhbXBsaW5nKEJNRTY4MF9PU184WCk7DQ0KICAgIEJNRS5zZXRIdW1pZGl0eU92ZXJzYW1wbGluZyhCTUU2ODBfT1NfMlgpOw0NCiAgICBCTUUuc2V0UHJlc3N1cmVPdmVyc2FtcGxpbmcoQk1FNjgwX09TXzRYKTsNDQogICAgQk1FLnNldElJUkZpbHRlclNpemUoQk1FNjgwX0ZJTFRFUl9TSVpFXzMpOw0NCiAgI2VuZGlmDQ0KICAjaWZkZWYgU0NEMzBfQ09OTkVDVEVEDQ0KICAgIFdpcmUuYmVnaW4oKTsNDQogICAgU0NELmJlZ2luKCk7DQ0KICAjZW5kaWYNDQogICNpZmRlZiBESVNQTEFZMTI4eDY0X0NPTk5FQ1RFRA0NCiAgZGlzcGxheS5jbGVhckRpc3BsYXkoKTsNDQogIGRpc3BsYXkuc2V0Q3Vyc29yKDMwLCAyOCk7DQ0KICBkaXNwbGF5LnNldFRleHRTaXplKDIpOw0NCiAgZGlzcGxheS5wcmludCgiUmVhZHkhIik7DQ0KICBkaXNwbGF5LmRpc3BsYXkoKTsNDQogICNlbmRpZg0NCiAgI2lmZGVmIERQUzMxMF9DT05ORUNURUQNDQogICAgZHBzLmJlZ2luX0kyQygweDc2KTsNDQogICAgZHBzLmNvbmZpZ3VyZVByZXNzdXJlKERQUzMxMF82NEhaLCBEUFMzMTBfNjRTQU1QTEVTKTsNDQogICAgZHBzLmNvbmZpZ3VyZVRlbXBlcmF0dXJlKERQUzMxMF82NEhaLCBEUFMzMTBfNjRTQU1QTEVTKTsNDQogICNlbmRpZg0NCiAgI2lmZGVmIFNQUzMwX0NPTk5FQ1RFRA0NCiAgICBzZW5zaXJpb25faTJjX2luaXQoKTsNDQogICAgcmV0ID0gc3BzMzBfc2V0X2Zhbl9hdXRvX2NsZWFuaW5nX2ludGVydmFsX2RheXMoYXV0b19jbGVhbl9kYXlzKTsNDQogICAgcmV0ID0gc3BzMzBfc3RhcnRfbWVhc3VyZW1lbnQoKTsNDQogICNlbmRpZg0NCiAgREVCVUcoRigiSW5pdGlhbGl6aW5nIHNlbnNvcnMgZG9uZSEiKSk7DQ0KICBERUJVRyhGKCJTdGFydGluZyBsb29wIGluIDMgc2Vjb25kcy4iKSk7DQ0KICBkZWxheSgzMDAwKTsNDQp9DQ0KDQ0KDQ0Kdm9pZCBsb29wKCkgew0NCiAgREVCVUcoRigiU3RhcnRpbmcgbmV3IG1lYXN1cmVtZW50Li4uIikpOw0NCiNpZmRlZiBESVNQTEFZMTI4eDY0X0NPTk5FQ1RFRA0NCiAgbG9uZyBkaXNwbGF5VGltZSA9IDUwMDA7DQ0KICBpbnQgcGFnZSA9IDA7DQ0KDQ0KICBkaXNwbGF5LmNsZWFyRGlzcGxheSgpOw0NCiAgZGlzcGxheS5zZXRDdXJzb3IoMCwgMCk7DQ0KICBkaXNwbGF5LnNldFRleHRTaXplKDEpOw0NCiAgZGlzcGxheS5zZXRUZXh0Q29sb3IoV0hJVEUsIEJMQUNLKTsNDQogIGRpc3BsYXkucHJpbnRsbigiVXBsb2FkaW5nIG5ldyBtZWFzdXJlbWVudC4uLiAiKTsNDQogIGRpc3BsYXkuZGlzcGxheSgpOw0NCiNlbmRpZg0NCiAgLy8gY2FwdHVyZSBsb29wIHN0YXJ0IHRpbWVzdGFtcA0NCiAgdW5zaWduZWQgbG9uZyBzdGFydCA9IG1pbGxpcygpOw0NCg0NCiAgLy8tLS0tLVRlbXBlcmF0dXJlLS0tLS0vLw0NCiAgLy8tLS0tLUh1bWlkaXR5LS0tLS0vLw0NCiNpZmRlZiBIREMxMDgwX0NPTk5FQ1RFRA0NCiAgYWRkTWVhc3VyZW1lbnQoSERDMTA4MF9URU1QRVJTRU5TT1JfSUQsIEhEQy5yZWFkVGVtcGVyYXR1cmUoKSk7DQ0KICBkZWxheSgyMDApOw0NCiAgYWRkTWVhc3VyZW1lbnQoSERDMTA4MF9SRUxMVUZTRU5TT1JfSUQsIEhEQy5yZWFkSHVtaWRpdHkoKSk7DQ0KI2VuZGlmDQ0KDQ0KICAvLy0tLS0tUHJlc3N1cmUtLS0tLS8vDQ0KI2lmZGVmIEJNUDI4MF9DT05ORUNURUQNDQogIGZsb2F0IHByZXNzdXJlOw0NCiAgcHJlc3N1cmUgPSBCTVAucmVhZFByZXNzdXJlKCkgLyAxMDA7DQ0KICBhZGRNZWFzdXJlbWVudChCTVAyODBfTFVGVERSU0VOU09SX0lELCBwcmVzc3VyZSk7DQ0KI2VuZGlmDQ0KDQ0KICAvLy0tLS0tTHV4LS0tLS0vLw0NCiNpZmRlZiBUU0w0NTMxNV9DT05ORUNURUQNDQogIGFkZE1lYXN1cmVtZW50KFRTTDQ1MzE1X0JFTEVVQ1NFTlNPUl9JRCwgTGlnaHRzZW5zb3JfZ2V0SWxsdW1pbmFuY2UoKSk7DQ0KI2VuZGlmDQ0KDQ0KICAvLy0tLS0tVVYgaW50ZW5zaXR5LS0tLS0vLw0NCiNpZmRlZiBWRU1MNjA3MF9DT05ORUNURUQNDQogIGFkZE1lYXN1cmVtZW50KFZFTUw2MDcwX1VWSU5URVNFTlNPUl9JRCwgVkVNTC5nZXRVVigpKTsNDQojZW5kaWYNDQoNDQogIC8vLS0tLS1Tb2lsIFRlbXBlcmF0dXJlICYgTW9pc3R1cmUtLS0tLS8vDQ0KI2lmZGVmIFNNVDUwX0NPTk5FQ1RFRA0NCiAgZmxvYXQgdm9sdGFnZSA9IGFuYWxvZ1JlYWQoU09JTFRFTVBQSU4pICogKDMuMyAvIDEwMjQuMCk7DQ0KICBmbG9hdCBzb2lsVGVtcGVyYXR1cmUgPSAodm9sdGFnZSAtIDAuNSkgKiAxMDA7DQ0KICBhZGRNZWFzdXJlbWVudChTTVQ1MF9CT0RFTlRTRU5TT1JfSUQsIHNvaWxUZW1wZXJhdHVyZSk7DQ0KICB2b2x0YWdlID0gYW5hbG9nUmVhZChTT0lMTU9JU1BJTikgKiAoMy4zIC8gMTAyNC4wKTsNDQogIGZsb2F0IHNvaWxNb2lzdHVyZSA9ICh2b2x0YWdlICogNTApIC8gMzsNDQogIGFkZE1lYXN1cmVtZW50KFNNVDUwX0JPREVORlNFTlNPUl9JRCwgc29pbE1vaXN0dXJlKTsNDQojZW5kaWYNDQoNDQogIC8vLS0tLS1kQihBKSBTb3VuZCBMZXZlbC0tLS0tLy8NDQojaWZkZWYgU09VTkRMRVZFTE1FVEVSX0NPTk5FQ1RFRA0NCiAgZmxvYXQgdiA9IGFuYWxvZ1JlYWQoU09VTkRNRVRFUlBJTikgKiAoMy4zIC8gMTAyNC4wKTsNDQogIGZsb2F0IGRlY2liZWwgPSB2ICogNTA7DQ0KICBhZGRNZWFzdXJlbWVudChTT1VORExFVkVMTUVURVJfTEFVVFNUU0VOU09SX0lELCBkZWNpYmVsKTsNDQojZW5kaWYNDQoNDQogIC8vLS0tLS1CTUU2ODAtLS0tLS8vDQ0KI2lmZGVmIEJNRTY4MF9DT05ORUNURUQNDQogIEJNRS5zZXRHYXNIZWF0ZXIoMCwgMCk7DQ0KICBmbG9hdCBnYXNSZXNpc3RhbmNlOw0NCiAgaWYgKCBCTUUucGVyZm9ybVJlYWRpbmcoKSkgew0NCiAgICBhZGRNZWFzdXJlbWVudChCTUU2ODBfTFVGVFRFU0VOU09SX0lELCBCTUUudGVtcGVyYXR1cmUgLSAxKTsNDQogICAgYWRkTWVhc3VyZW1lbnQoQk1FNjgwX0xVRlRGRVNFTlNPUl9JRCwgQk1FLmh1bWlkaXR5KTsNDQogICAgYWRkTWVhc3VyZW1lbnQoQk1FNjgwX0FUTUxVRlNFTlNPUl9JRCwgQk1FLnByZXNzdXJlIC8gMTAwKTsNDQogIH0NDQogIEJNRS5zZXRHYXNIZWF0ZXIoMzIwLCAxNTApOyAvLyAzMjAqQyBmb3IgMTUwIG1zDQ0KICBpZiAoIEJNRS5wZXJmb3JtUmVhZGluZygpKSB7DQ0KICAgICAgZ2FzUmVzaXN0YW5jZSA9IEJNRS5nYXNfcmVzaXN0YW5jZSAvIDEwMDAuMDsNDQogICAgICAgYWRkTWVhc3VyZW1lbnQoQk1FNjgwX1ZPQ1NFTlNPUl9JRCwgZ2FzUmVzaXN0YW5jZSk7DQ0KICB9DQ0KI2VuZGlmDQ0KDQ0KICAvLy0tLS0tV2luZCBzcGVlZC0tLS0tLy8NDQojaWZkZWYgV0lORFNQRUVEX0NPTk5FQ1RFRA0NCiAgZmxvYXQgdm9sdGFnZVdpbmQgPSBhbmFsb2dSZWFkKFdJTkRTUEVFRFBJTikgKiAoMy4zIC8gMTAyNC4wKTsNDQogIGZsb2F0IHdpbmRzcGVlZCA9IDAuMDsNDQogIGlmICh2b2x0YWdlV2luZCA+PSAwLjAxOCkgew0NCiAgICBmbG9hdCBwb2x5MSA9IHBvdyh2b2x0YWdlV2luZCwgMyk7DQ0KICAgIHBvbHkxID0gMTcuMDM1OTgwMTk5ODI5OSAqIHBvbHkxOw0NCiAgICBmbG9hdCBwb2x5MiA9IHBvdyh2b2x0YWdlV2luZCwgMik7DQ0KICAgIHBvbHkyID0gNDcuOTkwODE2ODM0MzM2MiAqIHBvbHkyOw0NCiAgICBmbG9hdCBwb2x5MyA9IDEyMi44OTk2Nzc1MjQ0MTMgKiB2b2x0YWdlV2luZDsNDQogICAgZmxvYXQgcG9seTQgPSAwLjY1NzUwNDEyNzI3MjcyODsNDQogICAgd2luZHNwZWVkID0gcG9seTEgLSBwb2x5MiArIHBvbHkzIC0gcG9seTQ7DQ0KICAgIHdpbmRzcGVlZCA9IHdpbmRzcGVlZCAqIDAuMjc3Nzc3Nzc3Nzc3Nzc3ODsgLy9jb252ZXJzaW9uIGluIG0vcw0NCiAgfQ0NCiAgYWRkTWVhc3VyZW1lbnQoV0lORFNQRUVEX1dJTkRHRVNFTlNPUl9JRCwgd2luZHNwZWVkKTsNDQojZW5kaWYNDQoNDQogIC8vLS0tLS1DTzItLS0tLS8vDQ0KI2lmZGVmIFNDRDMwX0NPTk5FQ1RFRA0NCiAgYWRkTWVhc3VyZW1lbnQoU0NEMzBfQ08yU0VOU09SX0lELCBTQ0QuZ2V0Q08yKCkpOw0NCiNlbmRpZg0NCg0NCiAgLy8tLS0tLURQUzMxMCBQcmVzc3VyZS0tLS0tLy8NDQogICNpZmRlZiBEUFMzMTBfQ09OTkVDVEVEDQ0KICAgIHNlbnNvcnNfZXZlbnRfdCB0ZW1wX2V2ZW50LCBwcmVzc3VyZV9ldmVudDsNDQogICAgZHBzLmdldEV2ZW50cygmdGVtcF9ldmVudCwgJnByZXNzdXJlX2V2ZW50KTsNDQogICAgYWRkTWVhc3VyZW1lbnQoRFBTMzEwX0xVRlREUlNFTlNPUl9JRCwgcHJlc3N1cmVfZXZlbnQucHJlc3N1cmUpOw0NCiAgI2VuZGlmDQ0KDQ0KICAjaWZkZWYgU1BTMzBfQ09OTkVDVEVEDQ0KICAgIHJldCA9IHNwczMwX3JlYWRfbWVhc3VyZW1lbnQoJm0pOw0NCiAgICBhZGRNZWFzdXJlbWVudChTUFMzMF9QTTFTRU5TT1JfSUQsIG0ubWNfMXAwKTsNDQogICAgYWRkTWVhc3VyZW1lbnQoU1BTMzBfUE0yNVNFTlNPUl9JRCwgbS5tY18ycDUpOw0NCiAgICBhZGRNZWFzdXJlbWVudChTUFMzMF9QTTRTRU5TT1JfSUQsIG0ubWNfNHAwKTsNDQogICAgYWRkTWVhc3VyZW1lbnQoU1BTMzBfUE0xMFNFTlNPUl9JRCwgbS5tY18xMHAwKTsNDQogICNlbmRpZg0NCg0NCiAgREVCVUcoRigiU3VibWl0IHZhbHVlcyIpKTsNDQogIHN1Ym1pdFZhbHVlcygpOw0NCg0NCiAgLy8gc2NoZWR1bGUgbmV4dCByb3VuZCBvZiBtZWFzdXJlbWVudHMNDQogIGZvciAoOzspIHsNDQogICAgdW5zaWduZWQgbG9uZyBub3cgPSBtaWxsaXMoKTsNDQogICAgdW5zaWduZWQgbG9uZyBlbGFwc2VkID0gbm93IC0gc3RhcnQ7DQ0KI2lmZGVmIERJU1BMQVkxMjh4NjRfQ09OTkVDVEVEDQ0KICAgIGRpc3BsYXkuY2xlYXJEaXNwbGF5KCk7DQ0KICAgIGRpc3BsYXkuc2V0Q3Vyc29yKDAsIDApOw0NCiAgICBkaXNwbGF5LnNldFRleHRTaXplKDEpOw0NCiAgICBkaXNwbGF5LnNldFRleHRDb2xvcihXSElURSwgQkxBQ0spOw0NCiAgICBzd2l0Y2ggKHBhZ2UpDQ0KICAgIHsNDQogICAgICBjYXNlIDA6DQ0KICAgICAgICAvLyBIREMgJiBCTVANDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dFNpemUoMik7DQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRDb2xvcihCTEFDSywgV0hJVEUpOw0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIkhEQyZCTVAiKSk7DQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRDb2xvcihXSElURSwgQkxBQ0spOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgxKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiVGVtcDoiKSk7DQ0KI2lmZGVmIEhEQzEwODBfQ09OTkVDVEVEDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oSERDLnJlYWRUZW1wZXJhdHVyZSgpKTsNDQojZWxzZQ0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIm5vdCBjb25uZWN0ZWQiKSk7DQ0KI2VuZGlmDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiSHVtaToiKSk7DQ0KI2lmZGVmIEhEQzEwODBfQ09OTkVDVEVEDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oSERDLnJlYWRIdW1pZGl0eSgpKTsNDQojZWxzZQ0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIm5vdCBjb25uZWN0ZWQiKSk7DQ0KI2VuZGlmDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiUHJlc3MuOiIpKTsNDQojaWZkZWYgQk1QMjgwX0NPTk5FQ1RFRA0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEJNUC5yZWFkUHJlc3N1cmUoKSAvIDEwMCk7DQ0KI2Vsc2UNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihGKCJub3QgY29ubmVjdGVkIikpOw0NCiNlbmRpZg0NCiAgICAgICAgYnJlYWs7DQ0KICAgICAgY2FzZSAxOg0NCiAgICAgICAgLy8gVFNML1ZFTUwNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dFNpemUoMik7DQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRDb2xvcihCTEFDSywgV0hJVEUpOw0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIlRTTCZWRU1MIikpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0Q29sb3IoV0hJVEUsIEJMQUNLKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbigpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgxKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiTHV4OiIpKTsNDQojaWZkZWYgVFNMNDUzMTVfQ09OTkVDVEVEDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oTGlnaHRzZW5zb3JfZ2V0SWxsdW1pbmFuY2UoKSk7DQ0KI2Vsc2UNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihGKCJub3QgY29ubmVjdGVkIikpOw0NCiNlbmRpZg0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKCk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50KCJVVjoiKTsNDQojaWZkZWYgVkVNTDYwNzBfQ09OTkVDVEVEDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oVkVNTC5nZXRVVigpKTsNDQojZWxzZQ0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIm5vdCBjb25uZWN0ZWQiKSk7DQ0KI2VuZGlmDQ0KICAgICAgICBicmVhazsNDQogICAgICBjYXNlIDI6DQ0KICAgICAgICAvLyBTUFMzMF9DT05ORUNURUQNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dFNpemUoMik7DQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRDb2xvcihCTEFDSywgV0hJVEUpOw0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIlBNMSZQTTIuNSIpKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dENvbG9yKFdISVRFLCBCTEFDSyk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dFNpemUoMSk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50KEYoIlBNMToiKSk7DQ0KDQ0KICAgICAgICAjaWZkZWYgU1BTMzBfQ09OTkVDVEVEDQ0KICAgICAgICAgIGRpc3BsYXkucHJpbnRsbihtLm1jXzFwMCk7DQ0KICAgICAgICAjZWxzZQ0NCiAgICAgICAgICBkaXNwbGF5LnByaW50bG4oRigibm90IGNvbm5lY3RlZCIpKTsNDQogICAgICAgICNlbmRpZg0NCg0NCiAgICAgICAgZGlzcGxheS5wcmludChGKCJQTS4yNToiKSk7DQ0KICAgICAgICAjaWZkZWYgU1BTMzBfQ09OTkVDVEVEDQ0KICAgICAgICAgIGRpc3BsYXkucHJpbnRsbihtLm1jXzJwNSk7DQ0KICAgICAgICAjZWxzZSANDQogICAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIm5vdCBjb25uZWN0ZWQiKSk7DQ0KICAgICAgICAjZW5kaWYNDQoNDQogICAgICAgIGJyZWFrOw0NCiAgICAgIGNhc2UgMzoNDQogICAgICAgIC8vIFNQUzMwX0NPTk5FQ1RFRA0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgyKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dENvbG9yKEJMQUNLLCBXSElURSk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oRigiUE00JlBNMTAiKSk7DQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRDb2xvcihXSElURSwgQkxBQ0spOw0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKCk7DQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRTaXplKDEpOw0NCiAgICAgICAgZGlzcGxheS5wcmludChGKCJQTTQ6IikpOw0NCiAgICAgICAgDQ0KICAgICAgICAjaWZkZWYgU1BTMzBfQ09OTkVDVEVEDQ0KICAgICAgICAgIGRpc3BsYXkucHJpbnRsbihtLm1jXzRwMCk7DQ0KICAgICAgICAjZWxzZQ0NCiAgICAgICAgICBkaXNwbGF5LnByaW50bG4oRigibm90IGNvbm5lY3RlZCIpKTsNDQogICAgICAgICNlbmRpZg0NCiAgICAgICAgICBkaXNwbGF5LnByaW50KEYoIlBNMTA6IikpOw0NCiAgICAgICAgI2lmZGVmIFNQUzMwX0NPTk5FQ1RFRA0NCiAgICAgICAgICBkaXNwbGF5LnByaW50bG4obS5tY18xMHAwKTsNDQogICAgICAgICNlbHNlIA0NCiAgICAgICAgICBkaXNwbGF5LnByaW50bG4oRigibm90IGNvbm5lY3RlZCIpKTsNDQogICAgICAgICNlbmRpZg0NCiAgICAgICAgYnJlYWs7DQ0KICAgICAgY2FzZSA0Og0NCiAgICAgICAgLy8gU01ULCBTT1VORCBMRVZFTCAsIEJNRQ0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgyKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dENvbG9yKEJMQUNLLCBXSElURSk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oRigiU29pbCIpKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dENvbG9yKFdISVRFLCBCTEFDSyk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dFNpemUoMSk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50KEYoIlRlbXA6IikpOw0NCiNpZmRlZiBTTVQ1MF9DT05ORUNURUQNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihzb2lsVGVtcGVyYXR1cmUpOw0NCiNlbHNlDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oRigibm90IGNvbm5lY3RlZCIpKTsNDQojZW5kaWYNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbigpOw0NCiAgICAgICAgZGlzcGxheS5wcmludChGKCJNb2lzdDoiKSk7DQ0KI2lmZGVmIFNNVDUwX0NPTk5FQ1RFRA0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKHNvaWxNb2lzdHVyZSk7DQ0KI2Vsc2UNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihGKCJub3QgY29ubmVjdGVkIikpOw0NCiNlbmRpZg0NCg0NCiAgICAgICAgYnJlYWs7DQ0KICAgICAgY2FzZSA1Og0NCiAgICAgICAgLy8gV0lORFNQRUVEIFNDRDMwDQ0KICAgICAgICBkaXNwbGF5LnNldFRleHRTaXplKDIpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0Q29sb3IoQkxBQ0ssIFdISVRFKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihGKCJXaW5kJlNDRDMwIikpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0Q29sb3IoV0hJVEUsIEJMQUNLKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbigpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgxKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiU3BlZWQ6IikpOw0NCiNpZmRlZiBXSU5EU1BFRURfQ09OTkVDVEVEDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4od2luZHNwZWVkKTsNDQojZWxzZQ0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKEYoIm5vdCBjb25uZWN0ZWQiKSk7DQ0KI2VuZGlmDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiU0NEMzA6IikpOw0NCiNpZmRlZiBTQ0QzMF9DT05ORUNURUQNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihTQ0QuZ2V0Q08yKCkpOw0NCiNlbHNlDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oRigibm90IGNvbm5lY3RlZCIpKTsNDQojZW5kaWYNDQogICAgICAgIGJyZWFrOw0NCiAgICAgIGNhc2UgNjoNDQogICAgICAgICAgLy8gU01ULCBTT1VORCBMRVZFTCAsIEJNRQ0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgyKTsNDQogICAgICAgIGRpc3BsYXkuc2V0VGV4dENvbG9yKEJMQUNLLCBXSElURSk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oRigiU291bmQmQk1FIikpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0Q29sb3IoV0hJVEUsIEJMQUNLKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbigpOw0NCiAgICAgICAgZGlzcGxheS5zZXRUZXh0U2l6ZSgxKTsNDQogICAgICAgIGRpc3BsYXkucHJpbnQoRigiU291bmQ6IikpOw0NCiNpZmRlZiBTT1VORExFVkVMTUVURVJfQ09OTkVDVEVEDQ0KICAgICAgICBkaXNwbGF5LnByaW50bG4oZGVjaWJlbCk7DQ0KI2Vsc2UNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihGKCJub3QgY29ubmVjdGVkIikpOw0NCiNlbmRpZg0NCiAgICAgICAgZGlzcGxheS5wcmludGxuKCk7DQ0KICAgICAgICBkaXNwbGF5LnByaW50KEYoIkdhczoiKSk7DQ0KI2lmZGVmIEJNRTY4MF9DT05ORUNURUQNDQogICAgICAgIGRpc3BsYXkucHJpbnRsbihnYXNSZXNpc3RhbmNlKTsNDQojZWxzZQ0NCiAgICAgICAgZGlzcGxheS5wcmludChGKCJub3QgY29ubmVjdGVkIikpOw0NCiNlbmRpZg0NCg0NCiAgICAgICAgYnJlYWs7DQ0KICAgIH0NDQogICAgZGlzcGxheS5kaXNwbGF5KCk7DQ0KICAgIGlmIChlbGFwc2VkID49IGRpc3BsYXlUaW1lKQ0NCiAgICB7DQ0KICAgICAgaWYgKHBhZ2UgPT0gNCkNDQogICAgICB7DQ0KICAgICAgICBwYWdlID0gMDsNDQogICAgICB9DQ0KICAgICAgZWxzZQ0NCiAgICAgIHsNDQogICAgICAgIHBhZ2UgKz0gMTsNDQogICAgICB9DQ0KICAgICAgZGlzcGxheVRpbWUgKz0gNTAwMDsNDQogICAgfQ0NCiNlbmRpZg0NCiAgICBpZiAoZWxhcHNlZCA+PSBwb3N0aW5nSW50ZXJ2YWwpDQ0KICAgICAgcmV0dXJuOw0NCiAgfQ0NCn0NDQoNDQppbnQgcmVhZF9yZWcoYnl0ZSBhZGRyZXNzLCB1aW50OF90IHJlZykNDQp7DQ0KICBpbnQgaSA9IDA7DQ0KDQ0KICBXaXJlLmJlZ2luVHJhbnNtaXNzaW9uKGFkZHJlc3MpOw0NCiAgV2lyZS53cml0ZShyZWcpOw0NCiAgV2lyZS5lbmRUcmFuc21pc3Npb24oKTsNDQogIFdpcmUucmVxdWVzdEZyb20oKHVpbnQ4X3QpYWRkcmVzcywgKHVpbnQ4X3QpMSk7DQ0KICBkZWxheSgxKTsNDQogIGlmKFdpcmUuYXZhaWxhYmxlKCkpDQ0KICAgIGkgPSBXaXJlLnJlYWQoKTsNDQoNDQogIHJldHVybiBpOw0NCn0NDQoNDQp2b2lkIHdyaXRlX3JlZyhieXRlIGFkZHJlc3MsIHVpbnQ4X3QgcmVnLCB1aW50OF90IHZhbCkNDQp7DQ0KICBXaXJlLmJlZ2luVHJhbnNtaXNzaW9uKGFkZHJlc3MpOw0NCiAgV2lyZS53cml0ZShyZWcpOw0NCiAgV2lyZS53cml0ZSh2YWwpOw0NCiAgV2lyZS5lbmRUcmFuc21pc3Npb24oKTsNDQp9DQ0KDQ0KI2lmZGVmIFRTTDQ1MzE1X0NPTk5FQ1RFRA0NCnZvaWQgTGlnaHRzZW5zb3JfYmVnaW4oKQ0NCnsNDQogIFdpcmUuYmVnaW4oKTsNDQogIHVuc2lnbmVkIGludCB1ID0gMDsNDQogIERFQlVHKEYoIkNoZWNraW5nIGxpZ2h0c2Vuc29ydHlwZSIpKTsNDQogIHUgPSByZWFkX3JlZygweDI5LCAweDgwIHwgMHgwQSk7IC8vaWQgcmVnaXN0ZXINDQogIGlmICgodSAmIDB4RjApID09IDB4QTApICAgICAgICAgICAgLy8gVFNMNDUzMTUNDQogIHsNDQogICAgREVCVUcoRigiVFNMNDUzMTUiKSk7DQ0KICAgIHdyaXRlX3JlZygweDI5LCAweDgwIHwgMHgwMCwgMHgwMyk7IC8vY29udHJvbDogcG93ZXIgb24NDQogICAgd3JpdGVfcmVnKDB4MjksIDB4ODAgfCAweDAxLCAweDAyKTsgLy9jb25maWc6IE09NCBUPTEwMG1zDQ0KICAgIGRlbGF5KDEyMCk7DQ0KICAgIGxpZ2h0c2Vuc29ydHlwZSA9IDA7IC8vVFNMNDUzMTUNDQogIH0NDQogIGVsc2UNDQogIHsNDQogICAgREVCVUcoRigiTFRSMzI5IikpOw0NCiAgICBMVFIuYmVnaW4oKTsNDQogICAgTFRSLnNldENvbnRyb2woZ2FpbiwgZmFsc2UsIGZhbHNlKTsNDQogICAgTFRSLnNldE1lYXN1cmVtZW50UmF0ZShpbnRlZ3JhdGlvblRpbWUsIG1lYXN1cmVtZW50UmF0ZSk7DQ0KICAgIExUUi5zZXRQb3dlclVwKCk7IC8vcG93ZXIgb24gd2l0aCBkZWZhdWx0IHNldHRpbmdzDQ0KICAgIGRlbGF5KDEwKTsgLy9XYWl0IDEwIG1zIChtYXgpIC0gd2FrZXVwIHRpbWUgZnJvbSBzdGFuZGJ5DQ0KICAgIGxpZ2h0c2Vuc29ydHlwZSA9IDE7ICAgICAgICAgICAgICAgICAgICAgLy8NDQogIH0NDQp9DQ0KDQ0KdW5zaWduZWQgaW50IExpZ2h0c2Vuc29yX2dldElsbHVtaW5hbmNlKCkNDQp7DQ0KICB1bnNpZ25lZCBpbnQgbHV4ID0gMDsNDQogIGlmIChsaWdodHNlbnNvcnR5cGUgPT0gMCkgLy8gVFNMNDUzMTUNDQogIHsNDQogICAgdW5zaWduZWQgaW50IHUgPSAocmVhZF9yZWcoMHgyOSwgMHg4MCB8IDB4MDQpIDw8IDApOyAgLy9kYXRhIGxvdw0NCiAgICB1IHw9IChyZWFkX3JlZygweDI5LCAweDgwIHwgMHgwNSkgPDwgOCk7IC8vZGF0YSBoaWdoDQ0KICAgIGx1eCA9IHUgKiA0OyAvLyBjYWxjIGx1eCB3aXRoIE09NCBhbmQgVD0xMDBtcw0NCiAgfQ0NCiAgZWxzZSBpZiAobGlnaHRzZW5zb3J0eXBlID09IDEpIC8vTFRSLTMyOUFMUy0wMQ0NCiAgew0NCiAgICBkZWxheSgxMDApOw0NCiAgICB1bnNpZ25lZCBpbnQgZGF0YTAsIGRhdGExOw0NCiAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgew0NCiAgICAgIGlmIChMVFIuZ2V0RGF0YShkYXRhMCwgZGF0YTEpKSB7DQ0KICAgICAgICBpZihMVFIuZ2V0THV4KGdhaW4sIGludGVncmF0aW9uVGltZSwgZGF0YTAsIGRhdGExLCBsdXgpKTsNDQogICAgICAgIGVsc2UgREVCVUcoRigiTFRSIHNlbnNvciBzYXR1cmF0ZWQiKSk7DQ0KICAgICAgICBpZihsdXggPiAwKSBicmVhazsNDQogICAgICAgIGVsc2UgZGVsYXkoMTApOw0NCiAgICAgIH0NDQogICAgICBlbHNlIHsNDQogICAgICAgIERFQlVHMihGKCJMVFIgZ2V0RGF0YSBlcnJvciAiKSk7DQ0KICAgICAgICBieXRlIGVycm9yID0gTFRSLmdldEVycm9yKCk7DQ0KICAgICAgICBTZXJpYWwucHJpbnRsbihlcnJvcik7DQ0KICAgICAgfQ0NCiAgICB9DQ0KICB9DQ0KICByZXR1cm4gbHV4Ow0NCn0NDQojZW5kaWYNDQo="
  }
}
